# Домашнее задание к занятию 6.1 "Типы и структура СУБД"

---

## Задание 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.  
Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:  
    - Электронные чеки в json виде  
    - Склады и автомобильные дороги для логистической компании  
    - Генеалогические деревья  
    - Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации  
    - Отношения клиент-покупка для интернет-магазина  
Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.  

Решение:

> Электронные чеки в json виде  
- Документные СУБД, например MongoDB. Данную СУБД выбирают для хранения сущностей, с разной структурой. Особенно если 
нужно хранить структуры, включая объекты, списки и словари, особенно в формате близкому к JSON. 

> Склады и автомобильные дороги для логистической компании  
- Графовые СУБД, например - Neo4j, Amazon Neptune. Специфичный тип, предназначены для работы с графами, с их узлами, 
свойствами, и произвольными отношениями между узлами.

> Генеалогические деревья  
- Сетевые БД, например, IDS, т.к. есть два родителя и нельзя хранить их в одной ячейке.

> Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации  
- СУБД типа ключ-значение, например Redis. Такая СУБД хорошо подходит для баз где нужно хранить достаточно простые 
структуры, используется для кэширования данных, чтобы иметь к ним очень быстрый доступ.

> Отношения клиент-покупка для интернет-магазина  
- Реляционные СУБД, например Oracle, PostgreSQL, MySQL. Основной признак, который говорит о том что нужно выбирать 
реляционную СУБД – это высокая нормализация данных. Дополнительными признаками будет необходимость обработки большого 
кол-ва коротких транзакций, с большей долей операций на вставку.

## Задание 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой 
классификации по CAP-теореме соответствует ваша система, если (каждый пункт - это отдельная реализация вашей системы 
и для каждого пункта надо привести классификацию):  
  - Данные записываются на все узлы с задержкой до часа (асинхронная запись)  
  - При сетевых сбоях, система может разделиться на 2 раздельных кластера  
  - Система может не прислать корректный ответ или сбросить соединение  

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?  
 
Решение:

> Данные записываются на все узлы с задержкой до часа (асинхронная запись)
- CA, EL-PC
> При сетевых сбоях, система может разделиться на 2 раздельных кластера
- AP, PA-EL
> Система может не прислать корректный ответ или сбросить соединение
- CP, PA-EC

## Задание 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?
 
Решение:

Не могут, т.к. есть принципы противоречат друг другу. BASE отдает приоритет высокой производительности/доступности 
в ущерб согласованности данных.  
Главное разногласие в требовании согласованности.
ACID требует немедленной согласованности, BASE согласованности в какой-то момент времени в будущем, и согласованность
может обеспечиваться не механизмами БД, а средствами разработки.

## Задание 4

Вам дали задачу написать системное решение, основой которого бы послужили:  
    - фиксация некоторых значений с временем жизни  
    - реакция на истечение таймаута  
Вы слышали о key-value хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора данной системы?  
 
Решение:

Redis это key-value хранилище, имеет механизм Pub/Sub и TTL с возможностью задавать срок жизни записи, после истечения 
которого, записи будут автоматически удаляться.
Такая СУБД хорошо подходит для баз где нужно хранить достаточно простые структуры, используется для кэширования данных, 
чтобы иметь к ним очень быстрый доступ.    
Минусы Redis:  
- Redis не поддерживает шифрование в сети, поэтому он не подходит для обработки конфиденциальных данных.
- Redis не предоставляет языка запросов или реляционной алгебры, поэтому сложные запросы могут создаваться и выполняться 
с трудом.
- Redis — это система в памяти, а это означает, что для хранения данных требуется большой объем оперативной памяти. 
Это может быть сложно осуществимо для некоторых приложений.  
- Консистентность данных - в случае отказа сервера, данные из оперативной памяти будут утеряны и сохранятся только данные 
с последней синхронизации с диском
- Redis не поддерживает индексирование, поэтому производительность запросов может снизиться, если набор данных большой 
и сложный. 
- Экземпляр БД не масштабируется